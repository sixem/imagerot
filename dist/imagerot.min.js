!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("imagerot",[],t):"object"==typeof exports?exports.imagerot=t():e.imagerot=t()}(this,(()=>(()=>{"use strict";var e={517:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.random=t.floor=t.max=t.min=void 0;const n=Math.min;t.min=n;const o=Math.max;t.max=o;const i=Math.floor;t.floor=i;const r=Math.random;t.random=r},295:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.effectPool=void 0;const a=r(n(871)),c=r(n(186)),f=Object.values(Object.assign(Object.assign({},a),c));t.effectPool=f.reduce(((e,t)=>(t.hasOwnProperty("browser")&&(e[t.name]=t.browser),e)),{})},216:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.blur=void 0;const o="horizontal",i=5,r=({data:e,width:t,height:r},a=null)=>n(void 0,void 0,void 0,(function*(){const{direction:n=o,intensity:c=i}=a||{},f=new Uint8Array(e.length);f.set(e);for(let o=0;o<r;o++)for(let i=0;i<t;i++){let a=4*(o*t+i),u=0,d=0,l=0,h=0;for(let a=1;a<=c;a++)if("horizontal"===n){if(i+a<t){let n=4*(o*t+i+a);u+=e[n],d+=e[n+1],l+=e[n+2],h++}}else if("vertical"===n&&o+a<r){let n=4*((o+a)*t+i);u+=e[n],d+=e[n+1],l+=e[n+2],h++}f[a]=u/h,f[a+1]=d/h,f[a+2]=l/h}return f})),a={name:"blur",browser:r,node:r};t.blur=a},888:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.dither=void 0;const o=.5,i=({data:e,width:t,height:i},r=null)=>n(void 0,void 0,void 0,(function*(){e=yield(({data:e,width:t,height:i},r=null)=>n(void 0,void 0,void 0,(function*(){const{intensity:n=o}=r||{},a=t*i;for(let t=0;t<a;t++){const n=4*t,o=(e[n]+e[n+1]+e[n+2])/3;e[n]=e[n+1]=e[n+2]=o}for(let o=0;o<a;o++){const i=4*o,r=e[i],a=r>255*n?255:0,c=r-a;e[i]=a,i+4<e.length&&(e[i+4]=e[i+4]+7*c/16),i+4*t<e.length&&(e[i+4*t]=e[i+4*t]+5*c/16),i+4*t+4<e.length&&(e[i+4*t+4]=e[i+4*t+4]+1*c/16),i+4*t-4>=0&&(e[i+4*t-4]=e[i+4*t-4]+3*c/16),e[i+1]=e[i+2]=e[i]}return new Uint8Array(e)})))({data:e,width:t,height:i},r);const a=t*i,c=2*Math.random()*Math.PI,f=2*Math.random()*Math.PI,u=2*Math.random()*Math.PI;for(let n=0;n<a;n++){const o=4*n,r=n%t,a=Math.floor(n/t),d=e[o],l=d*(.75+.25*Math.sin(2*Math.PI*(r/t)+c)),h=d*(.75+.25*Math.sin(2*Math.PI*(a/i)+f)),s=d*(.75+.25*Math.sin(2*Math.PI*(r/t+a/i+u)));e[o]=255*Math.pow(l/255,.75),e[o+1]=255*Math.pow(h/255,.75),e[o+2]=255*Math.pow(s/255,.75)}return new Uint8Array(e)})),r={name:"dither",browser:i,node:i};t.dither=r},871:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(216),t),i(n(888),t),i(n(164),t)},164:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.rectangles=void 0;const i=n(517),r=5,a=10,c=1,f=.15,u=({data:e,width:t,height:n},u=null)=>o(void 0,void 0,void 0,(function*(){const{offset:o=r,intensity:d=a,sizeModifier:l=c,invertChance:h=f}=u||{},s=new Uint8Array(e),v=d,w=(0,i.floor)((0,i.max)(20,(0,i.min)(t,n)/10)*l);for(let r=0;r<v;r++){let r,a;do{r=(0,i.floor)(.25*w+.75*(0,i.random)()*w),a=(0,i.floor)(.25*w+.75*(0,i.random)()*w)}while((0,i.max)(r,a)/(0,i.min)(r,a)<1.5);const c=(0,i.floor)((0,i.random)()*(t-r)),f=(0,i.floor)((0,i.random)()*(n-a)),u=(0,i.floor)(2*((0,i.random)()-.5)*o),d=(0,i.floor)(2*((0,i.random)()-.5)*o),l=5+(0,i.floor)(15*(0,i.random)())*((0,i.random)()>.5?1:-1),v=(0,i.random)()<h;for(let o=f;o<f+a;o++)for(let a=c;a<c+r;a++){const r=4*(o*t+a),c=4*((o+d+n)%n*t+(a+u+t)%t);for(let t=0;t<3;t++){let n=e[c+t]+l;v&&(n=255-n),n=(0,i.max)(0,(0,i.min)(255,n)),v&&n<50||(s[r+t]=n)}s[r+3]=e[c+3]}}return s})),d={name:"rectangles",browser:u,node:u};t.rectangles=d},186:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(449),t),i(n(61),t)},61:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.degrade=void 0;const o=.075,i={name:"degrade",browser:({data:e,width:t,height:i},r=null)=>n(void 0,void 0,void 0,(function*(){const{quality:n=o}=r||{},a="undefined"!=typeof window?window:self,c=new OffscreenCanvas(t,i),f=c.getContext("2d");if(!f)throw new Error("Failed to obtain context");const u=new ImageData(new Uint8ClampedArray(e.buffer),t,i);f.putImageData(u,0,0);const d=yield c.convertToBlob({type:"image/jpeg",quality:n}),l=yield a.createImageBitmap(d);f.clearRect(0,0,c.width,c.height),f.drawImage(l,0,0);const h=f.getImageData(0,0,t,i);return new Uint8Array(h.data.buffer)}))};t.degrade=i},449:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.pixelate=void 0;const i=n(513),r=8,a={name:"pixelate",browser:({data:e,width:t,height:n},a=null)=>o(void 0,void 0,void 0,(function*(){const{intensity:o=r}=a||{},c=new OffscreenCanvas(t,n),f=c.getContext("2d"),u=new ImageData(new Uint8ClampedArray(e),t,n);null==f||f.putImageData(u,0,0);const d=new OffscreenCanvas(t,n),l=d.getContext("2d");if(!f||!l)throw new Error("Failed to obtain context");l.imageSmoothingEnabled=!1,l.drawImage(c,0,0,t/o,n/o),l.drawImage(d,0,0,t/o,n/o,0,0,t,n);const h=l.getImageData(0,0,t,n).data;return(0,i.removeAlphaChannel)(new Uint8Array(h.buffer))}))};t.pixelate=a},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.arrayPick=void 0,t.arrayPick=e=>e[Math.floor(Math.random()*e.length)]},513:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(749),t),i(n(564),t),i(n(380),t),i(n(627),t)},380:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=void 0,t.isBrowser=()=>"undefined"!=typeof self||"undefined"!=typeof window},749:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomize=void 0,t.randomize=(e,t)=>Math.floor(Math.random()*(t-e+1)+e)},627:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeAlphaChannel=void 0,t.removeAlphaChannel=e=>{for(let t=0;t<e.length;t+=4)e[t+3]=255;return e}},433:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToBlob=void 0,t.bufferToBlob=({data:e,width:t,height:o})=>n(void 0,void 0,void 0,(function*(){const n=new OffscreenCanvas(t,o),i=n.getContext("2d"),r=new Uint8ClampedArray(e.buffer),a=new ImageData(r,t,o);return null==i||i.putImageData(a,0,0),n.convertToBlob().then((e=>{if(e)return URL.createObjectURL(e);throw new Error("Failed to create Blob from canvas image")}))}))},208:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.fileToBuffer=void 0,t.fileToBuffer=e=>n(void 0,void 0,void 0,(function*(){return new Promise(((t,o)=>{const i=new FileReader;i.onload=()=>n(void 0,void 0,void 0,(function*(){const e=i.result,n=new Blob([e]),r=yield createImageBitmap(n),a=new OffscreenCanvas(r.width,r.height).getContext("2d");if(a){a.drawImage(r,0,0,r.width,r.height);const e=a.getImageData(0,0,r.width,r.height);t([new Uint8Array(e.data.buffer),r.width,r.height])}else o(new Error("Failed to get context"))})),i.onerror=()=>{o(new Error("Failed to read file"))},i.readAsArrayBuffer(e)}))}))},532:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToBlob=t.useMode=t.useEffect=t.getRandomEffect=t.getRandomMode=t.listEffects=t.listModes=t.stage=void 0;const c=n(513),f=n(468),u=n(951),d=n(208),l=n(433);Object.defineProperty(t,"bufferToBlob",{enumerable:!0,get:function(){return l.bufferToBlob}});const h=r(n(961)),s=n(295);t.stage=({data:e,url:t})=>a(void 0,void 0,void 0,(function*(){let[n,o,i]=[null,0,0];if(e?e instanceof File?[n,o,i]=yield(0,d.fileToBuffer)(e):Array.isArray(e)&&e[0]instanceof Uint8Array&&([n,o,i]=[...e]):t&&"string"==typeof t&&([n,o,i]=yield(0,f.urlToBuffer)(t)),!n||!o||!i)throw new Error("Failed to load image data");return{data:n,width:o,height:i}})),t.listModes=()=>Object.keys(h),t.listEffects=()=>Object.keys(s.effectPool),t.getRandomMode=()=>(0,c.arrayPick)(Object.keys(h)),t.getRandomEffect=()=>(0,c.arrayPick)(Object.keys(s.effectPool)),t.useEffect=({data:e,width:t,height:n},o,i)=>a(void 0,void 0,void 0,(function*(){return(0,u.useEffect)({data:e,width:t,height:n},s.effectPool,o,i)})),t.useMode=({data:e,width:t,height:n},o)=>a(void 0,void 0,void 0,(function*(){return(0,u.useMode)({data:e,width:t,height:n},s.effectPool,o)}))},468:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.urlToBuffer=void 0,t.urlToBuffer=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(e),n=yield t.blob(),o=yield createImageBitmap(n),i=new OffscreenCanvas(o.width,o.height).getContext("2d");if(i){i.drawImage(o,0,0,o.width,o.height);const e=i.getImageData(0,0,o.width,o.height);return[new Uint8Array(e.data.buffer),o.width,o.height]}throw new Error("Failed to get context")}))},858:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.applyEffect=void 0,t.applyEffect=({data:e,width:t,height:o,effectPool:i,effect:r,options:a=null})=>n(void 0,void 0,void 0,(function*(){return new Promise(((c,f)=>n(void 0,void 0,void 0,(function*(){try{const n=yield((e,t)=>{for(let[n,o]of Object.entries(e))if(n===t)return o;return null})(i,r)({data:e,width:t,height:o},a);n?c({data:n,width:t,height:o}):f("Buffer is null")}catch(e){f(e)}}))))}))},221:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.applyMode=void 0;const c=r(n(961));t.applyMode=({data:e,width:t,height:n,mode:o,effectPool:i})=>a(void 0,void 0,void 0,(function*(){return new Promise(((r,f)=>a(void 0,void 0,void 0,(function*(){try{const a=yield(e=>{for(let[t,n]of Object.entries(c))if(t===e)return n;return null})(o)({data:e,width:t,height:n,effects:i});r({data:a,width:t,height:n})}catch(e){f(e)}}))))}))},111:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.blobToBuffer=void 0,t.blobToBuffer=(e,t,o)=>n(void 0,void 0,void 0,(function*(){const n=yield createImageBitmap(e),i=new OffscreenCanvas(t,o).getContext("2d");if(!i)throw new Error("Failed to obtain context from `OffscreenCanvas`");i.drawImage(n,0,0);const r=i.getImageData(0,0,t,o);return new Uint8Array(r.data.buffer)}))},951:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(111),t),i(n(236),t),i(n(831),t),i(n(221),t),i(n(858),t)},236:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useEffect=void 0;const i=n(858);t.useEffect=({data:e,width:t,height:n},r,a,c)=>o(void 0,void 0,void 0,(function*(){const o=Array.isArray(a)?a:[a];for(let a of o){if(!r[a])throw new Error(`Invalid effect: ${a}`);const o=yield(0,i.applyEffect)({data:e,width:t,height:n,effectPool:r,effect:a,options:c});[e,t,n]=[o.data,o.width,o.height]}return{data:e,width:t,height:n}}))},831:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useMode=void 0;const c=n(221),f=r(n(961));t.useMode=({data:e,width:t,height:n},o,i)=>a(void 0,void 0,void 0,(function*(){const r=Array.isArray(i)?i:[i];for(let i of r){if(!f.hasOwnProperty(i))throw new Error(`Invalid mode: ${i}`);const r=yield(0,c.applyMode)({data:e,width:t,height:n,effectPool:o,mode:i});[e,t,n]=[r.data,r.width,r.height]}return{data:e,width:t,height:n}}))},53:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.chimera=void 0;const i=n(517),r=n(513),a=[.25,.5];t.chimera=({data:e,width:t,height:n,effects:c})=>o(void 0,void 0,void 0,(function*(){const f=(0,i.random)()>=.5?"horizontal":"vertical",u=(0,r.randomize)(5,10);e=(yield null==c?void 0:c.blur({data:e,width:t,height:n},{direction:f,intensity:u}))||e,e=yield(({data:e,width:t,height:n})=>o(void 0,void 0,void 0,(function*(){for(let o=0;o<n;o++)for(let n=0;n<t;n++){let i=4*(o*t+n),r=e[i],c=e[i+1],f=e[i+2];e[i+0]=r+c*a[1]+f*a[0],e[i+1]=r*a[1]+c+f*a[0],e[i+2]=r*a[0]+c*a[1]+f}return e})))({data:e,width:t,height:n});for(let t=0;t<e.length;t+=4){const n=(0,i.random)()<.2,o=(0,i.random)()<.4?(0,i.floor)(50*(0,i.random)()):0;for(let a=0;a<3;a++)e[t+a]=n?(0,i.min)(e[t+a]+(0,r.randomize)(1,0===a?15:10),255):e[t+a],e[t+a]=(0,i.min)(255,(0,i.max)(0,e[t+a]+((0,i.floor)(20*(0,i.random)())-30))),e[t+a]=o?(0,i.min)(255,(0,i.max)(0,e[t+a]+o)):e[t+a]}return e=(yield null==c?void 0:c.rectangles({data:e,width:t,height:n},{offset:10,intensity:15,sizeModifier:1.25}))||e}))},961:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(53),t),i(n(450),t)},450:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{f(o.next(e))}catch(e){r(e)}}function c(e){try{f(o.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.lacunae=void 0;const i=n(513),r=n(517);t.lacunae=({data:e})=>o(void 0,void 0,void 0,(function*(){for(let t=0;t<e.length;t+=4){const n=(0,r.random)()<.2,o=(0,r.random)()<.4?(0,r.floor)(50*(0,r.random)()):0;for(let a=0;a<3;a++)e[t+a]=e[t+a]-(0,i.randomize)(1,15),e[t+a]=e[t+a]<0?e[t+a]+255:e[t+a],e[t+a]=n?(0,r.min)(e[t+a]+(0,i.randomize)(1,0===a?15:10),255):e[t+a],e[t+a]=(0,r.min)(255,(0,r.max)(0,e[t+a]+(0,r.floor)(20*(0,r.random)()-40))),e[t+a]=o?(0,r.min)(255,(0,r.max)(0,e[t+a]+o)):e[t+a]}return e}))}},t={};return function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}(532)})()));