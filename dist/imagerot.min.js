!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("imagerot",[],t):"object"==typeof exports?exports.imagerot=t():e.imagerot=t()}(this,()=>(()=>{"use strict";var e={24:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.applyEffect=void 0,t.applyEffect=e=>n(void 0,[e],void 0,function*({data:e,width:t,height:o,effectPool:r,effect:i,options:a=null}){return new Promise((c,u)=>n(void 0,void 0,void 0,function*(){try{const n=yield((e,t)=>{for(let[n,o]of Object.entries(e))if(n===t)return o.method;return null})(r,i)({data:e,width:t,height:o},a);n?c({data:n,width:t,height:o}):u("Buffer is null")}catch(e){u(e)}}))})},55:function(e,t,n){var o,r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),a=0;a<n.length;a++)"default"!==n[a]&&r(t,e,n[a]);return i(t,e),t}),c=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.rgbToHsv=t.hsvToRgb=t.urlToBuffer=t.fileToBuffer=t.bufferToBitmap=t.bufferToBlob=t.useMode=t.useEffect=t.listEffects=t.listModes=t.stage=void 0;const u=n(954);Object.defineProperty(t,"urlToBuffer",{enumerable:!0,get:function(){return u.urlToBuffer}});const f=n(250),l=n(520);Object.defineProperty(t,"bufferToBitmap",{enumerable:!0,get:function(){return l.bufferToBitmap}});const d=n(241);Object.defineProperty(t,"fileToBuffer",{enumerable:!0,get:function(){return d.fileToBuffer}});const h=n(468);Object.defineProperty(t,"bufferToBlob",{enumerable:!0,get:function(){return h.bufferToBlob}});const s=n(527);Object.defineProperty(t,"hsvToRgb",{enumerable:!0,get:function(){return s.hsvToRgb}}),Object.defineProperty(t,"rgbToHsv",{enumerable:!0,get:function(){return s.rgbToHsv}});const v=a(n(634)),y=n(800);t.stage=e=>c(void 0,[e],void 0,function*({data:e,url:t}){let[n,o,r]=[null,0,0];if(e){if(e instanceof File)[n,o,r]=yield(0,d.fileToBuffer)(e);else if(Array.isArray(e)&&e[0]instanceof Uint8Array)[n,o,r]=[...e];else if("object"==typeof e){let t=e;t.data instanceof Uint8Array&&t.width&&t.height&&([n,o,r]=[t.data,t.width,t.height])}}else t&&"string"==typeof t&&([n,o,r]=yield(0,u.urlToBuffer)(t));if(!n||!o||!r)throw new Error("Failed to load image data");return{data:n,width:o,height:r}}),t.listModes=()=>Object.keys(v),t.listEffects=()=>Object.keys(y.effectPool),t.useEffect=(e,t,n)=>c(void 0,[e,t,n],void 0,function*({data:e,width:t,height:n},o,r){return(0,f.useEffect)({data:e,width:t,height:n},y.effectPool,o,r||{})}),t.useMode=(e,t)=>c(void 0,[e,t],void 0,function*({data:e,width:t,height:n},o){return(0,f.useMode)({data:e,width:t,height:n},y.effectPool,o)})},59:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.useEffect=void 0;const r=n(24);t.useEffect=(e,t,n,i)=>o(void 0,[e,t,n,i],void 0,function*({data:e,width:t,height:n},o,i,a){const c=Array.isArray(i)?i:[i];if(Array.isArray(a)&&a.length!==c.length)throw new Error("Invalid options length");let u=0;for(let i of c){if(!o[i])throw new Error(`Invalid effect: ${i}`);const c=yield(0,r.applyEffect)({data:e,width:t,height:n,effectPool:o,effect:i,options:Array.isArray(a)?a[u]:a});[e,t,n]=[c.data,c.width,c.height],u++}return{data:e,width:t,height:n}})},83:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomize=void 0,t.randomize=(e,t)=>Math.floor(Math.random()*(t-e+1)+e)},84:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.chimera=void 0;const r=n(421),i=n(527),a=[.25,.5];t.chimera=e=>o(void 0,[e],void 0,function*({data:e,width:t,height:n,effects:c}){const u=(0,r.random)()>=.5?"horizontal":"vertical",f=(0,i.randomize)(5,10);e=(yield c.blur.method({data:e,width:t,height:n},{direction:u,intensity:f}))||e,e=yield(e=>o(void 0,[e],void 0,function*({data:e,width:t,height:n}){for(let o=0;o<n;o++)for(let n=0;n<t;n++){let r=4*(o*t+n),i=e[r],c=e[r+1],u=e[r+2];e[r+0]=i+c*a[1]+u*a[0],e[r+1]=i*a[1]+c+u*a[0],e[r+2]=i*a[0]+c*a[1]+u}return e}))({data:e,width:t,height:n});for(let t=0;t<e.length;t+=4){const n=(0,r.random)()<.2,o=(0,r.random)()<.4?(0,r.floor)(50*(0,r.random)()):0;for(let a=0;a<3;a++)e[t+a]=n?(0,r.min)(e[t+a]+(0,i.randomize)(1,0===a?15:10),255):e[t+a],e[t+a]=(0,r.min)(255,(0,r.max)(0,e[t+a]+((0,r.floor)(20*(0,r.random)())-30))),e[t+a]=o?(0,r.min)(255,(0,r.max)(0,e[t+a]+o)):e[t+a]}return(yield c.rectangles.method({data:e,width:t,height:n},{offset:10,intensity:15,sizeModifier:1.25}))||e})},90:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.acid=void 0;const r=n(527);t.acid=e=>o(void 0,[e],void 0,function*({data:e,width:t,height:n,effects:o}){const i=(0,r.getPixelOps)(o);e=(yield o.scanlines.method({data:e,width:t,height:n},{opacity:.1,thickness:2,lines:100}))||e,e=(yield o.rainbow.method({data:e,width:t,height:n}))||e,e=(yield o.rectangles.method({data:e,width:t,height:n},{offset:20,intensity:15,sizeModifier:3,invertChance:.1}))||e;for(let t=0;t<e.length;t+=4)i.solarize({index:t,data:e},{intensity:.4}),i.brightness({index:t,data:e},{brightness:-4}),i.noise({index:t,data:e},{ratio:.1});return(yield o.chromaticAberration.method({data:e,width:t,height:n},{intensity:5}))||e})},92:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.lacunae=void 0;const r=n(527),i=n(421);t.lacunae=e=>o(void 0,[e],void 0,function*({data:e}){for(let t=0;t<e.length;t+=4){const n=(0,i.random)()<.2,o=(0,i.random)()<.4?(0,i.floor)(50*(0,i.random)()):0;for(let a=0;a<3;a++)e[t+a]=e[t+a]-(0,r.randomize)(1,15),e[t+a]=e[t+a]<0?e[t+a]+255:e[t+a],e[t+a]=n?(0,i.min)(e[t+a]+(0,r.randomize)(1,0===a?15:10),255):e[t+a],e[t+a]=(0,i.min)(255,(0,i.max)(0,e[t+a]+(0,i.floor)(20*(0,i.random)()-40))),e[t+a]=o?(0,i.min)(255,(0,i.max)(0,e[t+a]+o)):e[t+a]}return e})},97:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.noise=void 0;const o=10,r=({index:e,data:t},n=null)=>{const{intensity:r=o,ratio:i=null}=n||{},a=i||r/100;for(let n=0;n<3;n++){const o=(2*Math.random()-1)*a,r=t[e+n]+255*o;t[e+n]=Math.max(0,Math.min(255,r))}},i=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e},t=null){const{intensity:n=o,ratio:i=null}=t||{},a=i||n/100;for(let t=0;t<e.length;t+=4)r({index:t,data:e},{ratio:a});return e}),a={name:"noise",browser:i,node:i,pixelOp:r};t.noise=a},104:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.grayscale=void 0;const o=1,r=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e},t=null){const{intensity:n=o}=t||{};for(let t=0;t<e.length;t+=4){let o=e[t],r=e[t+1],i=e[t+2],a=.299*o+.587*r+.114*i;e[t]=o*(1-n)+a*n,e[t+1]=r*(1-n)+a*n,e[t+2]=i*(1-n)+a*n}return e}),i={name:"grayscale",browser:r,node:r};t.grayscale=i},118:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.vaporwave=void 0,t.vaporwave=e=>n(void 0,[e],void 0,function*({data:e}){if(0===e.length)return e;const t=[[0,184,255],[255,0,193],[150,0,255],[0,255,249]],n=(t,n,o,r,i)=>{e[t]=Math.floor(Math.min(Math.max(n,0),255)),e[t+1]=Math.floor(Math.min(Math.max(o,0),255)),e[t+2]=Math.floor(Math.min(Math.max(r,0),255)),e[t+3]=Math.floor(Math.min(Math.max(i,0),255))},o=e.length;for(let r=0;r<o;r+=4){const o=e[r],i=e[r+1],a=e[r+2],c=e[r+3];o<=15&&i<=15&&a<=15?n(r,0,0,0,c):o>15&&o<=60&&i>15&&i<=60&&a>15&&a<=60?n(r,t[0][0],t[0][1],t[0][2],c):o>60&&o<=120&&i>60&&i<=120&&a>60&&a<=120?n(r,t[1][0],t[1][1],t[1][2],c):o>120&&o<=180&&i>120&&i<=180&&a>120&&a<=180?n(r,t[2][0],t[2][1],t[2][2],c):o>180&&o<=234&&i>180&&i<=234&&a>180&&a<=234?n(r,t[3][0],t[3][1],t[3][2],c):o>=235&&i>=235&&a>=235?n(r,255,255,255,c):n(r,o,i,a,c)}return e})},136:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.borders=void 0;const o=10,r=[0,0,0],i=1,a=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e,width:t,height:n},a=null){const{size:c=o,color:u=r,opacity:f=i}=a||{};for(let o=0;o<e.length;o+=4){let r=o/4%t,i=Math.floor(o/4/t);(r<c||r>=t-c||i<c||i>=n-c)&&(e[o]=e[o]*(1-f)+u[0]*f,e[o+1]=e[o+1]*(1-f)+u[1]*f,e[o+2]=e[o+2]*(1-f)+u[2]*f)}return e}),c={name:"borders",browser:a,node:a};t.borders=c},143:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.degrade=void 0;const o=.075,r={name:"degrade",browser:(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e,width:t,height:n},r=null){const{quality:i=o}=r||{},a="undefined"!=typeof window?window:self,c=new OffscreenCanvas(t,n),u=c.getContext("2d");if(!u)throw new Error("Failed to obtain context");const f=new ImageData(new Uint8ClampedArray(e.buffer),t,n);u.putImageData(f,0,0);const l=yield c.convertToBlob({type:"image/jpeg",quality:i}),d=yield a.createImageBitmap(l);u.clearRect(0,0,c.width,c.height),u.drawImage(d,0,0);const h=u.getImageData(0,0,t,n);return new Uint8Array(h.data.buffer)})};t.degrade=r},152:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.arrayPick=void 0,t.arrayPick=e=>e[Math.floor(Math.random()*e.length)]},172:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.heatmap=t.borders=t.chromaticAberration=t.solarize=t.scanlines=t.hueShift=t.sharpen=t.brightness=t.noise=t.grayscale=t.rainbow=t.rectangles=t.dither=void 0;var o=n(668);Object.defineProperty(t,"blur",{enumerable:!0,get:function(){return o.blur}});var r=n(545);Object.defineProperty(t,"dither",{enumerable:!0,get:function(){return r.dither}});var i=n(267);Object.defineProperty(t,"rectangles",{enumerable:!0,get:function(){return i.rectangles}});var a=n(233);Object.defineProperty(t,"rainbow",{enumerable:!0,get:function(){return a.rainbow}});var c=n(104);Object.defineProperty(t,"grayscale",{enumerable:!0,get:function(){return c.grayscale}});var u=n(97);Object.defineProperty(t,"noise",{enumerable:!0,get:function(){return u.noise}});var f=n(654);Object.defineProperty(t,"brightness",{enumerable:!0,get:function(){return f.brightness}});var l=n(356);Object.defineProperty(t,"sharpen",{enumerable:!0,get:function(){return l.sharpen}});var d=n(291);Object.defineProperty(t,"hueShift",{enumerable:!0,get:function(){return d.hueShift}});var h=n(651);Object.defineProperty(t,"scanlines",{enumerable:!0,get:function(){return h.scanlines}});var s=n(460);Object.defineProperty(t,"solarize",{enumerable:!0,get:function(){return s.solarize}});var v=n(926);Object.defineProperty(t,"chromaticAberration",{enumerable:!0,get:function(){return v.chromaticAberration}});var y=n(136);Object.defineProperty(t,"borders",{enumerable:!0,get:function(){return y.borders}});var w=n(447);Object.defineProperty(t,"heatmap",{enumerable:!0,get:function(){return w.heatmap}})},181:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.nostalgia=void 0,t.nostalgia=e=>n(void 0,[e],void 0,function*({data:e,width:t,height:n,effects:o}){e=yield o.degrade.method({data:e,width:t,height:n},{quality:.85});for(const r of["horizontal","vertical"])e=(yield o.blur.method({data:e,width:t,height:n},{direction:r,intensity:2}))||e;return e=yield o.chromaticAberration.method({data:e,width:t,height:n},{intensity:2}),e=yield o.grayscale.method({data:e,width:t,height:n},{intensity:.275}),e=yield o.noise.method({data:e,width:t,height:n},{intensity:8}),yield o.brightness.method({data:e,width:t,height:n},{brightness:2})})},233:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.rainbow=void 0;const r=n(421),i=e=>o(void 0,[e],void 0,function*({data:e,width:t,height:n}){const o=2*(0,r.random)()*r.PI,i=2*(0,r.random)()*r.PI,a=2*(0,r.random)()*r.PI;for(let c=0;c<e.length;c+=4){const u=c/4%t,f=(0,r.floor)(c/4/t),l=e[c],d=l*(.75+.25*(0,r.sin)(2*r.PI*(u/t)+o)),h=l*(.75+.25*(0,r.sin)(2*r.PI*(f/n)+i)),s=l*(.75+.25*(0,r.sin)(2*r.PI*(u/t+f/n+a)));e[c]=255*(0,r.pow)(d/255,.75),e[c+1]=255*(0,r.pow)(h/255,.75),e[c+2]=255*(0,r.pow)(s/255,.75)}return e}),a={name:"rainbow",browser:i,node:i};t.rainbow=a},241:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.fileToBuffer=void 0,t.fileToBuffer=e=>n(void 0,void 0,void 0,function*(){return new Promise((t,o)=>{const r=new FileReader;r.onload=()=>n(void 0,void 0,void 0,function*(){const e=r.result,n=new Blob([e]),i=yield createImageBitmap(n),a=new OffscreenCanvas(i.width,i.height).getContext("2d");if(a){a.drawImage(i,0,0,i.width,i.height);const e=a.getImageData(0,0,i.width,i.height);t([new Uint8Array(e.data.buffer),i.width,i.height])}else o(new Error("Failed to get context"))}),r.onerror=()=>{o(new Error("Failed to read file"))},r.readAsArrayBuffer(e)})})},250:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(59),t),r(n(637),t),r(n(742),t),r(n(24),t)},267:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.rectangles=void 0;const r=n(421),i=5,a=10,c=1,u=.15,f=(e,...t)=>o(void 0,[e,...t],void 0,function*({data:e,width:t,height:n},o=null){const{offset:f=i,intensity:l=a,sizeModifier:d=c,invertChance:h=u}=o||{},s=new Uint8Array(e),v=l,y=(0,r.floor)((0,r.max)(20,(0,r.min)(t,n)/10)*d);for(let o=0;o<v;o++){let o,i;do{o=(0,r.floor)(.25*y+.75*(0,r.random)()*y),i=(0,r.floor)(.25*y+.75*(0,r.random)()*y)}while((0,r.max)(o,i)/(0,r.min)(o,i)<1.5);const a=(0,r.floor)((0,r.random)()*(t-o)),c=(0,r.floor)((0,r.random)()*(n-i)),u=(0,r.floor)(2*((0,r.random)()-.5)*f),l=(0,r.floor)(2*((0,r.random)()-.5)*f),d=5+(0,r.floor)(15*(0,r.random)())*((0,r.random)()>.5?1:-1),v=(0,r.random)()<h;for(let f=c;f<c+i;f++)for(let i=a;i<a+o;i++){const o=4*(f*t+i),a=4*((f+l+n)%n*t+(i+u+t)%t);for(let t=0;t<3;t++){let n=e[a+t]+d;v&&(n=255-n),n=(0,r.max)(0,(0,r.min)(255,n)),v&&n<50||(s[o+t]=n)}s[o+3]=e[a+3]}}return s}),l={name:"rectangles",browser:f,node:f};t.rectangles=l},291:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.hueShift=void 0;const r=n(527),i=180,a=(e,...t)=>o(void 0,[e,...t],void 0,function*({data:e},t=null){const{shift:n=i}=t||{};for(let t=0;t<e.length;t+=4){let o=(0,r.rgbToHsv)(e[t],e[t+1],e[t+2]);o[0]=(o[0]+n/360)%1;let i=(0,r.hsvToRgb)(o[0],o[1],o[2]);e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=e[t+3]}return e}),c={name:"hueShift",browser:a,node:a};t.hueShift=c},295:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rgbToHsv=void 0,t.rgbToHsv=(e,t,n)=>{e/=255,t/=255,n/=255;let o=Math.max(e,t,n),r=Math.min(e,t,n),i=0,a=o,c=o-r,u=0===o?0:c/o;if(o!==r){switch(o){case e:i=(t-n)/c+(t<n?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4}i/=6}return[i,u||0,a||0]}},316:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hsvToRgb=void 0,t.hsvToRgb=(e,t,n)=>{let o=0,r=0,i=0,a=Math.floor(6*e),c=6*e-a,u=n*(1-t),f=n*(1-c*t),l=n*(1-(1-c)*t);switch(a%6){case 0:o=n,r=l,i=u;break;case 1:o=f,r=n,i=u;break;case 2:o=u,r=n,i=l;break;case 3:o=u,r=f,i=n;break;case 4:o=l,r=u,i=n;break;case 5:o=n,r=u,i=f}return[Math.round(255*o),Math.round(255*r),Math.round(255*i)]}},356:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.sharpen=void 0;const o=e=>n(void 0,[e],void 0,function*({data:e,width:t,height:n}){const o=[0,-1,0,-1,5,-1,0,-1,0],r=new Uint8Array(e.length);for(let i=0;i<n;i++)for(let a=0;a<t;a++){const c=4*(i*t+a);let u=0,f=0,l=0;for(let r=-1;r<=1;r++)for(let c=-1;c<=1;c++){const d=Math.max(0,Math.min(t-1,a+c)),h=4*(Math.max(0,Math.min(n-1,i+r))*t+d),s=3*(r+1)+(c+1);u+=e[h+0]*o[s],f+=e[h+1]*o[s],l+=e[h+2]*o[s]}r[c+0]=Math.min(255,Math.max(0,u)),r[c+1]=Math.min(255,Math.max(0,f)),r[c+2]=Math.min(255,Math.max(0,l)),r[c+3]=e[c+3]}return e.set(r),e}),r={name:"sharpen",browser:o,node:o};t.sharpen=r},421:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PI=t.pow=t.random=t.floor=t.sin=t.max=t.min=void 0;const n=Math.min;t.min=n;const o=Math.max;t.max=o;const r=Math.sin;t.sin=r;const i=Math.floor;t.floor=i;const a=Math.random;t.random=a;const c=Math.pow;t.pow=c;const u=Math.PI;t.PI=u},428:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=void 0,t.isBrowser=()=>"undefined"!=typeof self||"undefined"!=typeof window},433:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.degrade=t.pixelate=void 0;var o=n(629);Object.defineProperty(t,"pixelate",{enumerable:!0,get:function(){return o.pixelate}});var r=n(143);Object.defineProperty(t,"degrade",{enumerable:!0,get:function(){return r.degrade}})},447:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.heatmap=void 0;const o=.8,r=[{stop:0,color:{r:0,g:0,b:255}},{stop:.1,color:{r:0,g:255,b:0}},{stop:.3,color:{r:255,g:255,b:0}},{stop:.5,color:{r:255,g:165,b:0}},{stop:.7,color:{r:255,g:0,b:0}},{stop:1,color:{r:128,g:0,b:128}}],i=(e,t)=>{if(t<=0)return e[0].color;if(t>=1)return e[e.length-1].color;let n=1;for(;n<e.length-1&&!(t<e[n].stop);n++);const o=e[n-1].stop,r=(t-o)/(e[n].stop-o);return{r:Math.round(e[n-1].color.r*(1-r)+e[n].color.r*r),g:Math.round(e[n-1].color.g*(1-r)+e[n].color.g*r),b:Math.round(e[n-1].color.b*(1-r)+e[n].color.b*r),a:255}},a=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e,width:t,height:n},a=null){const{intensity:c=o,controlPoints:u=r}=a||{},f=t*n*4;for(let t=0;t<f;t+=4){const n=(e[t]+e[t+1]+e[t+2])/765,o=i(u,n*c);e[t]=o.r,e[t+1]=o.g,e[t+2]=o.b,e[t+3]=o.a||e[t+3]}return e}),c={name:"heatmap",browser:a,node:a};t.heatmap=c},460:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.solarize=void 0;const o=.5,r=(e,t)=>e<Math.floor(255*t)?e:255-e,i=({index:e,data:t},n=null)=>{const{intensity:i=o}=n||{},a=t[e],c=t[e+1],u=t[e+2];t[e]=r(a,i),t[e+1]=r(c,i),t[e+2]=r(u,i),t[e+3]=t[e+3]},a=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e},t=null){const{intensity:n=o}=t||{};for(let t=0;t<e.length;t+=4)i({index:t,data:e},{intensity:n});return e}),c={name:"solarize",browser:a,node:a,pixelOp:i};t.solarize=c},468:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToBlob=void 0,t.bufferToBlob=e=>n(void 0,[e],void 0,function*({data:e,width:t,height:n}){const o=new OffscreenCanvas(t,n),r=o.getContext("2d"),i=new Uint8ClampedArray(e.buffer),a=new ImageData(i,t,n);return null==r||r.putImageData(a,0,0),o.convertToBlob().then(e=>{if(e)return URL.createObjectURL(e);throw new Error("Failed to create Blob from canvas image")})})},520:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToBitmap=void 0,t.bufferToBitmap=e=>n(void 0,[e],void 0,function*({data:e,width:t,height:n}){const o=new ImageData(new Uint8ClampedArray(e),t,n),r=new OffscreenCanvas(t,n),i=r.getContext("2d");if(!i)throw new Error("Unable to get canvas context");return i.putImageData(o,0,0),createImageBitmap(r)})},527:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(83),t),r(n(152),t),r(n(428),t),r(n(935),t),r(n(316),t),r(n(295),t),r(n(884),t)},545:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.dither=void 0;const o=.5,r=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e,width:t,height:n},r=null){const{intensity:i=o}=r||{};for(let t=0;t<e.length;t+=4){const n=(e[t]+e[t+1]+e[t+2])/3;e[t]=e[t+1]=e[t+2]=n}for(let n=0;n<e.length;n+=4){const o=e[n]>255*i?255:0,r=e[n]-o;e[n]=o,n+4<e.length&&(e[n+4]=e[n+4]+7*r/16),n+4*t<e.length&&(e[n+4*t]=e[n+4*t]+5*r/16),n+4*t+4<e.length&&(e[n+4*t+4]=e[n+4*t+4]+1*r/16),n+4*t-4>=0&&(e[n+4*t-4]=e[n+4*t-4]+3*r/16),e[n+1]=e[n+2]=e[n]}return new Uint8Array(e)}),i={name:"dither",browser:r,node:r};t.dither=i},629:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.pixelate=void 0;const r=n(527),i=8,a={name:"pixelate",browser:(e,...t)=>o(void 0,[e,...t],void 0,function*({data:e,width:t,height:n},o=null){const{intensity:a=i}=o||{},c=new OffscreenCanvas(t,n),u=c.getContext("2d"),f=new ImageData(new Uint8ClampedArray(e),t,n);null==u||u.putImageData(f,0,0);const l=new OffscreenCanvas(t,n),d=l.getContext("2d");if(!u||!d)throw new Error("Failed to obtain context");d.imageSmoothingEnabled=!1,d.drawImage(c,0,0,t/a,n/a),d.drawImage(l,0,0,t/a,n/a,0,0,t,n);const h=d.getImageData(0,0,t,n).data;return(0,r.removeAlphaChannel)(new Uint8Array(h.buffer))})};t.pixelate=a},634:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pixelsort=t.vaporwave=t.nostalgia=t.acid=t.lacunae=t.chimera=void 0;var o=n(84);Object.defineProperty(t,"chimera",{enumerable:!0,get:function(){return o.chimera}});var r=n(92);Object.defineProperty(t,"lacunae",{enumerable:!0,get:function(){return r.lacunae}});var i=n(90);Object.defineProperty(t,"acid",{enumerable:!0,get:function(){return i.acid}});var a=n(181);Object.defineProperty(t,"nostalgia",{enumerable:!0,get:function(){return a.nostalgia}});var c=n(118);Object.defineProperty(t,"vaporwave",{enumerable:!0,get:function(){return c.vaporwave}});var u=n(941);Object.defineProperty(t,"pixelsort",{enumerable:!0,get:function(){return u.pixelsort}})},637:function(e,t,n){var o,r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),a=0;a<n.length;a++)"default"!==n[a]&&r(t,e,n[a]);return i(t,e),t}),c=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.useMode=void 0;const u=n(742),f=a(n(634));t.useMode=(e,t,n)=>c(void 0,[e,t,n],void 0,function*({data:e,width:t,height:n},o,r){const i=Array.isArray(r)?r:[r];for(let r of i){if(!f.hasOwnProperty(r))throw new Error(`Invalid mode: ${r}`);const i=yield(0,u.applyMode)({data:e,width:t,height:n,effectPool:o,mode:r});[e,t,n]=[i.data,i.width,i.height]}return{data:e,width:t,height:n}})},651:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.scanlines=void 0;const o=.5,r=1,i=10,a=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e,width:t,height:n},a=null){const{opacity:c=o,thickness:u=r,lines:f=i}=a||{},l=Math.floor(n/f);for(let n=0;n<e.length;n+=4)Math.floor(n/4/t)%l<u&&(e[n]=e[n]*(1-c),e[n+1]=e[n+1]*(1-c),e[n+2]=e[n+2]*(1-c));return e}),c={name:"scanlines",browser:a,node:a};t.scanlines=c},654:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.brightness=void 0;const o=10,r=({index:e,data:t},n=null)=>{let{brightness:r=o}=n||{};r*=2.55;for(let n=0;n<3;n++){let o=t[e+n]+r;t[e+n]=Math.max(0,Math.min(255,o))}},i=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e},t=null){let{brightness:n=o}=t||{};n*=2.55;for(let t=0;t<e.length;t+=4)r({index:t,data:e},{brightness:n});return e}),a={name:"brightness",browser:i,node:i,pixelOp:r};t.brightness=a},668:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.blur=void 0;const o="horizontal",r=5,i=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e,width:t,height:n},i=null){const{direction:a=o,intensity:c=r}=i||{},u=new Uint8Array(e.length);u.set(e);for(let o=0;o<n;o++)for(let r=0;r<t;r++){let i=4*(o*t+r),f=0,l=0,d=0,h=0;for(let i=1;i<=c;i++)if("horizontal"===a){if(r+i<t){let n=4*(o*t+r+i);f+=e[n],l+=e[n+1],d+=e[n+2],h++}}else if("vertical"===a&&o+i<n){let n=4*((o+i)*t+r);f+=e[n],l+=e[n+1],d+=e[n+2],h++}u[i]=f/h,u[i+1]=l/h,u[i+2]=d/h}return u}),a={name:"blur",browser:i,node:i};t.blur=a},742:function(e,t,n){var o,r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),a=0;a<n.length;a++)"default"!==n[a]&&r(t,e,n[a]);return i(t,e),t}),c=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.applyMode=void 0;const u=a(n(634));t.applyMode=e=>c(void 0,[e],void 0,function*({data:e,width:t,height:n,mode:o,effectPool:r}){return new Promise((i,a)=>c(void 0,void 0,void 0,function*(){try{const a=yield(e=>{for(let[t,n]of Object.entries(u))if(t===e)return n;return null})(o)({data:e,width:t,height:n,effects:r});i({data:a,width:t,height:n})}catch(e){a(e)}}))})},800:function(e,t,n){var o,r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),a=0;a<n.length;a++)"default"!==n[a]&&r(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.effectPool=void 0;const c=a(n(172)),u=a(n(433)),f=Object.values(Object.assign(Object.assign({},c),u));t.effectPool=f.reduce((e,t)=>(t.hasOwnProperty("browser")&&(e[t.name]={method:t.browser},t.hasOwnProperty("pixelOp")&&(e[t.name].pixelOp=t.pixelOp)),e),{})},884:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPixelOps=void 0,t.getPixelOps=e=>Object.entries(e).reduce((e,[t,n])=>(void 0!==n.pixelOp&&(e[t]=n.pixelOp),e),{})},926:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.chromaticAberration=void 0;const o=5,r=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e,width:t},n=null){const{intensity:r=o}=n||{},i=new Uint8Array(e.length),a=new Uint8Array(e.length),c=new Uint8Array(e.length);for(let t=0;t<e.length;t+=4)i[t]=e[t],a[t+1]=e[t+1],c[t+2]=e[t+2],i[t+3]=a[t+3]=c[t+3]=e[t+3];const u=(e,n)=>{const o=new Uint8Array(e.length);for(let r=0;r<e.length;r+=4){const i=r/4%t,a=Math.floor(r/4/t),c=4*(Math.max(0,Math.min(t-1,i+n))+a*t);o[c]=e[r],o[c+1]=e[r+1],o[c+2]=e[r+2],o[c+3]=e[r+3]}return o},f=Math.floor((2*Math.random()-1)*r),l=Math.floor((2*Math.random()-1)*r),d=Math.floor((2*Math.random()-1)*r),h=u(i,f),s=u(a,l),v=u(c,d);for(let t=0;t<e.length;t+=4)e[t]=h[t],e[t+1]=s[t+1],e[t+2]=v[t+2],e[t+3]=e[t+3];return e}),i={name:"chromaticAberration",browser:r,node:r};t.chromaticAberration=i},935:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeAlphaChannel=void 0,t.removeAlphaChannel=e=>{for(let t=0;t<e.length;t+=4)e[t+3]=255;return e}},941:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.pixelsort=void 0,t.pixelsort=(e,...t)=>n(void 0,[e,...t],void 0,function*({data:e,width:t,height:n,effects:o},r={}){var i,a,c;if(0===e.length)return e;const u=null!==(i=r.minThreshold)&&void 0!==i?i:50,f=null!==(a=r.maxThreshold)&&void 0!==a?a:200,l=null!==(c=r.direction)&&void 0!==c?c:"vertical",d=t=>.299*e[t]+.587*e[t+1]+.114*e[t+2];if("horizontal"===l)for(let o=0;o<n;o++){const n=o*t*4;let r=0;for(;r<t;){for(;r<t&&d(n+4*r)<u;)r++;if(r>=t)break;let o=r;for(;o<t&&d(n+4*o)<=f;)o++;if(o!==r){if(o>r+1){const t=o-r,i=new Array(t);for(let e=0;e<t;e++)i[e]=n+4*(r+e);i.sort((e,t)=>d(t)-d(e));const a=new Uint8Array(4*t);for(let n=0;n<t;n++){const t=i[n],o=4*n;a[o]=e[t],a[o+1]=e[t+1],a[o+2]=e[t+2],a[o+3]=e[t+3]}e.set(a,n+4*r)}r=o}else r++}}else if("vertical"===l)for(let o=0;o<t;o++){const r=4*o;let i=0;for(;i<n;){for(;i<n&&d(r+i*t*4)<u;)i++;if(i>=n)break;let o=i;for(;o<n&&d(r+o*t*4)<=f;)o++;if(o!==i){if(o>i+1){const n=o-i,a=new Array(n);for(let e=0;e<n;e++)a[e]=r+(i+e)*t*4;a.sort((e,t)=>d(t)-d(e));const c=new Uint8Array(4*n);for(let t=0;t<n;t++){const n=a[t],o=4*t;c[o]=e[n],c[o+1]=e[n+1],c[o+2]=e[n+2],c[o+3]=e[n+3]}for(let o=0;o<n;o++){const n=r+(i+o)*t*4;e[n]=c[4*o],e[n+1]=c[4*o+1],e[n+2]=c[4*o+2],e[n+3]=c[4*o+3]}}i=o}else i++}}for(const r of["horizontal","vertical"])e=(yield o.blur.method({data:e,width:t,height:n},{direction:r,intensity:2}))||e;return e=yield o.chromaticAberration.method({data:e,width:t,height:n},{intensity:2}),e=yield o.grayscale.method({data:e,width:t,height:n},{intensity:.275}),e=yield o.noise.method({data:e,width:t,height:n},{intensity:7}),e=yield o.brightness.method({data:e,width:t,height:n},{brightness:-2})})},954:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.urlToBuffer=void 0,t.urlToBuffer=e=>n(void 0,void 0,void 0,function*(){const t=yield fetch(e),n=yield t.blob(),o=yield createImageBitmap(n),r=new OffscreenCanvas(o.width,o.height).getContext("2d");if(r){r.drawImage(o,0,0,o.width,o.height);const e=r.getImageData(0,0,o.width,o.height);return[new Uint8Array(e.data.buffer),o.width,o.height]}throw new Error("Failed to get context")})}},t={};return function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(55)})());